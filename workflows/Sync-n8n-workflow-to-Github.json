{
  "id": "BS0OX4Pxh4RCn0AM",
  "name": "Sync-n8n-workflow-to-Github",
  "active": false,
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours",
              "hoursInterval": 3
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        64,
        208
      ],
      "id": "c531fd17-270f-4eea-9d22-a9895eb4f61a",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "filters": {},
        "requestOptions": {}
      },
      "type": "n8n-nodes-base.n8n",
      "typeVersion": 1,
      "position": [
        304,
        192
      ],
      "id": "35ac4d75-5512-4dac-87d4-2a8a7ad4ae42",
      "name": "Get many workflows",
      "credentials": {
        "n8nApi": {
          "id": "BjRI63JkbE2H7qxK",
          "name": "n8n account"
        }
      }
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "edit",
        "owner": {
          "__rl": true,
          "value": "https://github.com/Cstan0824",
          "mode": "url"
        },
        "repository": {
          "__rl": true,
          "value": "n8n_workflows",
          "mode": "list",
          "cachedResultName": "n8n_workflows",
          "cachedResultUrl": "https://github.com/Cstan0824/n8n_workflows"
        },
        "filePath": "=workflows/{{ $('Edit Fields').item.json.name }}.json",
        "fileContent": "={{ JSON.stringify($('Edit Fields').item.json, null, 2) }}",
        "commitMessage": "=Update workflow file at workflows/{{ $('Edit Fields').item.json.name }}.json",
        "additionalParameters": {
          "branch": {
            "branch": "main"
          }
        }
      },
      "type": "n8n-nodes-base.github",
      "typeVersion": 1.1,
      "position": [
        256,
        736
      ],
      "id": "2ed5bd79-6a84-4643-a170-89c030045e3c",
      "name": "Edit a file",
      "webhookId": "439fe76a-6c04-48e2-b4c7-11dd4b18717a",
      "credentials": {
        "githubApi": {
          "id": "POURyRuASam0kau7",
          "name": "GitHub account"
        }
      }
    },
    {
      "parameters": {
        "resource": "file",
        "owner": {
          "__rl": true,
          "value": "https://github.com/Cstan0824",
          "mode": "url"
        },
        "repository": {
          "__rl": true,
          "value": "n8n_workflows",
          "mode": "list",
          "cachedResultName": "n8n_workflows",
          "cachedResultUrl": "https://github.com/Cstan0824/n8n_workflows"
        },
        "filePath": "=workflows/{{ $('Edit Fields').item.json.name }}.json",
        "fileContent": "={{ JSON.stringify($('Edit Fields').item.json, null, 2) }}",
        "commitMessage": "=Create workflow file at workflows/{{ $('Edit Fields').item.json.name }}.json"
      },
      "type": "n8n-nodes-base.github",
      "typeVersion": 1.1,
      "position": [
        256,
        544
      ],
      "id": "4950f5d9-cff0-4a50-b7e1-236b6226f0bf",
      "name": "Create a file",
      "webhookId": "47367284-8aa4-4935-94df-eede05213156",
      "credentials": {
        "githubApi": {
          "id": "POURyRuASam0kau7",
          "name": "GitHub account"
        }
      }
    },
    {
      "parameters": {
        "content": "## Backup all workflow to Github",
        "height": 464,
        "width": 1136
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        0,
        -16
      ],
      "id": "917f9e40-c883-4f83-a06c-dcb37e8c5ad1",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## Sync Workflow from Github to n8n",
        "height": 400,
        "width": 432
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        0,
        496
      ],
      "id": "274d795e-1c69-4290-b673-0ce9d38e7947",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## Update README.md\n",
        "height": 304,
        "width": 592
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        576,
        496
      ],
      "id": "7543e628-0013-4e44-9521-1bdfdd31c547",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "hasOutputParser": true,
        "options": {
          "systemMessage": "You are an autonomous **Workflow README Synchronization Agent** responsible for keeping the README documentation fully aligned with the workflows inside the workflow directory.\n\n## Responsibilities\n\n1. **Retrieve all workflow files** using `get_all_files_from_workflow_dir`.\n2. **Retrieve the current README.md** using `get_readme`.\n3. **Analyze and compare** workflow entries in the README with the actual workflow files.\n4. Determine if updates are required (missing workflows, outdated descriptions, removed workflows, formatting inconsistencies).\n5. If changes are required, construct a **complete updated README.md** that maintains the following structure:\n\n   * Basic Information\n   * Table of Contents\n   * Introduction\n   * Quick Start (Fork from GitHub â†’ copy workflow JSON â†’ import into n8n)\n   * Workflows Section (workflow list + descriptions + purpose)\n6. Update the repository using `update_readme`.\n7. Only update the README if changes are detected.\n\n## Rules\n\n* Always call `get_all_files_from_workflow_dir` first.\n* Always read the existing README using `get_readme` before modifying anything.\n* Only call `update_readme` when modifications are needed.\n* Output must always be **the full README content**, not a diff.\n* Preserve all unchanged sections.\n* Only the Workflows section is allowed to be modified by default.\n* If any core sections are missing (e.g., Introduction, Quick Start, Basic Information, Table of Contents), the agent is allowed to add them so the README remains complete.\n\n## Workflow Section Structure\n\nEach workflow entry should contain:\n\n* Workflow Title\n* Short Description\n* Purpose / Problem It Solves\n* Optional: Metadata-derived details\n\n## Tool Usage\n\n### `get_all_files_from_workflow_dir`\n\nRetrieve and interpret all workflow files from the workflow directory.\n\n### `get_readme`\n\nRetrieve the current README.md so you can analyze and compare workflow details.\n\n### `update_readme`\n\nSubmit the fully updated README.md when changes are required.\n\n## Output Requirements\n\n* All tool calls must follow correct schema.\n* When returning final output, include a `workflowChanges` property summarizing what was updated.\n* This summary will be used by the email notification workflow.\n\n## README templates description\n```\n# ðŸš€ Project Title\n\nA brief, one-sentence summary describing what this repository does.\n\n---\n\n## ðŸ“Œ Table of Contents\n\n* [Introduction](#introduction)\n* [Quick Start](#quick-start)\n* [Workflows](#workflows)\n\n---\n\n## ðŸ“– Introduction\n\nProvide a clear explanation of the purpose of this repository and what problems it solves.\n\nExample:\nThis repository contains a collection of n8n workflows designed to automate common tasks such as notifications, synchronization, file management, and integration with third-party APIs. All workflows are maintained automatically by an AI agent to ensure the README stays aligned with the files inside the workflow directory.\n\n---\n\n## âš¡ Quick Start (Using n8n)\n\n### **1. Fork the Repository**\n\nClick the â€œForkâ€ button on GitHub to copy this project into your own workspace.\n\n---\n\n### **2. Import Workflows into n8n**\n\nYou can import workflows into n8n in two ways:\n\n#### **A. Using the workflow JSON files**\n\n1. Open any workflow file inside `/workflows/`\n2. Copy the JSON content\n3. Open n8n â†’ **Import from Clipboard**\n\n#### **B. Using n8n import**\n\n1. In n8n, click **Settings â†’ Import**\n2. Upload any `.json` workflow file from this repository\n\n---\n\n### **3. Configure Environment Variables**\n\nIf workflows require API keys, tokens, or credentials, configure them inside:\n\n```\\ n8n â†’ Settings â†’ Credentials\\ ```\n\n\n---\n\n## ðŸ› ï¸ Workflows\n\nThis section is automatically generated and maintained by the AI Agent. It contains:\n\n* Workflow Name\n* Short Description\n* Purpose & use-case summary\n\nThe agent compares the current README with the existing workflow files and ensures everything stays updated.\n\n### **Workflow List**\n\n(ðŸ”„ *This section is dynamically replaced by the agent*)\n\nExample format the agent must follow:\n\n#### ### Workflow: **email-notification.json**\n\n**Description:** Sends automated email notifications when triggered.\n**Purpose:** Useful for alerting administrators or sending user updates.\n\n#### ### Workflow: **daily-sync.json**\n\n**Description:** Syncs remote data sources every 24 hours.\n**Purpose:** Keeps systems updated without manual intervention.\n\n#### ### Workflow: **user-registration-handler.json**\n\n**Description:** Handles incoming user registration events.\n**Purpose:** Automates onboarding steps such as welcoming messages and account setup.\n\n---\n\n## ðŸ¤ Contributing\n\nContributions are not accepted for this repository.\n\n---\n\n## ðŸ“„ License\n\nThis project is licensed under the **Apache License 2.0**.\n```"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        608,
        592
      ],
      "id": "10a22a02-933d-47cc-9a7e-8170a261b4dc",
      "name": "AI Agent"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        528,
        960
      ],
      "id": "e50bcb6a-6cc9-4eba-96da-636cb67d565d",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        368,
        960
      ],
      "id": "9fdf31a6-2eeb-4261-b0f2-f5d4a3230612",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "wv7mP7xv9FatLqgD",
          "name": "Google Gemini(PaLM) Api account 2"
        }
      }
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "list",
        "owner": {
          "__rl": true,
          "value": "https://github.com/Cstan0824",
          "mode": "url"
        },
        "repository": {
          "__rl": true,
          "value": "n8n_workflows",
          "mode": "list",
          "cachedResultName": "n8n_workflows",
          "cachedResultUrl": "https://github.com/Cstan0824/n8n_workflows"
        },
        "filePath": "workflows/"
      },
      "type": "n8n-nodes-base.githubTool",
      "typeVersion": 1.1,
      "position": [
        672,
        960
      ],
      "id": "537baf0b-74e0-4f7c-bb76-619aa71abbac",
      "name": "List files in GitHub",
      "webhookId": "45de1ae5-0b49-4716-81a3-e1612194374b",
      "credentials": {
        "githubApi": {
          "id": "POURyRuASam0kau7",
          "name": "GitHub account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "3a09907c-603f-4feb-b6ed-b41b9c0d7cb0",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        32,
        640
      ],
      "id": "171f0d5c-b67e-481b-9156-5bbe087a3fa1",
      "name": "If File not Exists"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "dc69c79b-af4f-4937-ab4f-a0aa99d8a20e",
              "name": "name",
              "value": "={{ $json.name.trim().replaceAll(' ', '-').replaceAll(/[^a-zA-Z0-9\\-]/g, '') }}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "include": "except",
        "excludeFields": "updatedAt, createdAt, isArchived, staticData, triggerCount, shared",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        720,
        192
      ],
      "id": "cf231d19-3818-4129-9a6a-8e9d69cb40c9",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "9223abc8-a98a-4b0d-bda7-b4d94ae0ee9b",
              "leftValue": "={{ $json.tags && $json.tags.filter(item => item.name == 'sync-github').length > 0 }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        512,
        192
      ],
      "id": "823445fe-b8dc-4491-958f-5dc63afc2765",
      "name": "Filter"
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "get",
        "owner": {
          "__rl": true,
          "value": "https://github.com/Cstan0824",
          "mode": "url"
        },
        "repository": {
          "__rl": true,
          "value": "n8n_workflows",
          "mode": "list",
          "cachedResultName": "n8n_workflows",
          "cachedResultUrl": "https://github.com/Cstan0824/n8n_workflows"
        },
        "filePath": "README.md",
        "asBinaryProperty": false,
        "additionalParameters": {
          "reference": "main"
        }
      },
      "type": "n8n-nodes-base.githubTool",
      "typeVersion": 1.1,
      "position": [
        816,
        960
      ],
      "id": "abe2df03-9f21-487a-a1f5-0b98ae1c5be7",
      "name": "Get README.md",
      "webhookId": "06d5c2ff-54c2-4242-8a86-40d1e792f8c5",
      "credentials": {
        "githubApi": {
          "id": "POURyRuASam0kau7",
          "name": "GitHub account"
        }
      }
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "edit",
        "owner": {
          "__rl": true,
          "value": "https://github.com/Cstan0824",
          "mode": "url"
        },
        "repository": {
          "__rl": true,
          "value": "n8n_workflows",
          "mode": "list",
          "cachedResultName": "n8n_workflows",
          "cachedResultUrl": "https://github.com/Cstan0824/n8n_workflows"
        },
        "filePath": "README.md",
        "fileContent": "={{ $json.updatedReadme }}",
        "commitMessage": "Update README.md"
      },
      "type": "n8n-nodes-base.githubTool",
      "typeVersion": 1.1,
      "position": [
        976,
        960
      ],
      "id": "fc007636-bd39-4ae9-8272-02b48858cb14",
      "name": "Udpate README.md",
      "webhookId": "8fda127b-3ebc-48fd-a4e1-3d09ac87c9ff",
      "credentials": {
        "githubApi": {
          "id": "POURyRuASam0kau7",
          "name": "GitHub account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"updatedReadme\": \"<full new readme markdown here>\",\n  \"workflowChanges\": \"- Added new workflow: auto-sync.json\\n- Updated description: notify-user.json\\n- Removed deprecated: old-cleanup.json\"\n}\n",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1136,
        960
      ],
      "id": "5c232169-dff2-42a0-a78f-6bc936382d3b",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "fromEmail": "academystudy.noreply@gmail.com",
        "toEmail": "tancs8803@gmail.com",
        "subject": "Workflow Updated at Github",
        "html": "=<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>Workflow & README Sync Completed</title>\n</head>\n<body style=\"font-family: Arial, sans-serif; background-color: #f6f6f6; padding: 20px;\">\n  <div style=\"max-width: 600px; margin: auto; background: #ffffff; padding: 25px; border-radius: 8px; border: 1px solid #ddd;\">\n    \n    <h2 style=\"color: #333333; margin-top: 0;\">ðŸ”„ Workflow Synchronization Completed</h2>\n\n    <p style=\"font-size: 15px; color: #444444;\">\n      Hello,\n    </p>\n\n    <p style=\"font-size: 15px; color: #444444;\">\n      Your repository has been successfully synchronized. The agent compared all workflow files with the\n      existing <strong>README.md</strong> and updated the documentation accordingly.\n    </p>\n\n    <h3 style=\"color: #333333;\">ðŸ“˜ What Has Been Updated</h3>\n\n    <p style=\"font-size: 15px; color: #444444;\">\n      Below is a summary of changes detected during the synchronization:\n    </p>\n\n    <div style=\"font-size: 14px; color: #444444; background: #f0f0f0; padding: 12px; border-radius: 6px; border-left: 4px solid #4a90e2;\">\n      {{ $json.workflowChanges }}\n    </div>\n\n    <p style=\"font-size: 15px; color: #444444; margin-top: 20px;\">\n      You may review the updated README.md directly in your repository for the full details.\n    </p>\n\n    <p style=\"font-size: 14px; margin-top: 30px; color: #777;\">\n      This message was automatically generated by your Workflow README Sync Agent.\n    </p>\n\n  </div>\n</body>\n</html>\n",
        "options": {}
      },
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2.1,
      "position": [
        928,
        592
      ],
      "id": "20b5beae-23aa-41e5-aea5-a8ee0c1c6ca1",
      "name": "Send email",
      "webhookId": "f63ff371-f49d-4a0d-b434-97ee85e2ebc6",
      "credentials": {
        "smtp": {
          "id": "UkSkHy8ege7WBh1c",
          "name": "SMTP account"
        }
      }
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "get",
        "owner": {
          "__rl": true,
          "value": "https://github.com/Cstan0824",
          "mode": "url"
        },
        "repository": {
          "__rl": true,
          "value": "n8n_workflows",
          "mode": "list",
          "cachedResultName": "n8n_workflows",
          "cachedResultUrl": "https://github.com/Cstan0824/n8n_workflows"
        },
        "filePath": "=workflows/{{ $json.name }}.json",
        "additionalParameters": {
          "reference": "main"
        }
      },
      "type": "n8n-nodes-base.github",
      "typeVersion": 1.1,
      "position": [
        944,
        192
      ],
      "id": "da56cdf0-3330-4d1d-95db-47e4729b05ba",
      "name": "Get workflow file",
      "webhookId": "cbf4eacb-ea11-4e7a-8de5-9abc224dcd51",
      "credentials": {
        "githubApi": {
          "id": "POURyRuASam0kau7",
          "name": "GitHub account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        64,
        48
      ],
      "id": "5aa904f2-495d-4dc1-b7c8-6e9d42af4c5e",
      "name": "When clicking â€˜Execute workflowâ€™"
    }
  ],
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Get many workflows",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get many workflows": {
      "main": [
        [
          {
            "node": "Filter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit a file": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create a file": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Structured Output Parser",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "List files in GitHub": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Send email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If File not Exists": {
      "main": [
        [
          {
            "node": "Create a file",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Edit a file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Get workflow file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get README.md": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Udpate README.md": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Get workflow file": {
      "main": [
        [
          {
            "node": "If File not Exists",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "When clicking â€˜Execute workflowâ€™": {
      "main": [
        [
          {
            "node": "Get many workflows",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "2dbacc5c-ffa2-4fb5-98ae-2abc2875a1c0",
  "tags": [
    {
      "updatedAt": "2025-11-12T13:48:29.224Z",
      "createdAt": "2025-11-12T13:48:29.224Z",
      "id": "To22NZOwJthX72LT",
      "name": "sync-github"
    }
  ]
}